!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ResizeDetector={})}(this,(function(e){"use strict";var t,i,r=function(){function e(e,t){this.width=0|e,this.height=0|t,this.width<0&&(this.width=0),this.height<0&&(this.height=0)}return e.prototype.equals=function(e){return this.width===e.width&&this.height===e.height},e.prototype.createResizeSize=function(e){var t=e.width!==this.width,i=e.height!==this.height;return{width:this.width,oldWidth:e.width,widthChanged:t,height:this.height,oldHeight:e.height,heightChanged:i}},e}();var n,o=0;function s(e){var t,i,r,n=document.documentElement,o={detached:!1,rendered:!1};if(n.contains(e)){var s=e;for(o.rendered=!0;s===n||n.contains(s);){if("none"===(i="display",r=void 0,(r=(t=s).ownerDocument.defaultView)||(r=window),(r.getComputedStyle(t,null)||{display:"none"})[i])){o.rendered=!1;break}if(!(s.parentNode instanceof HTMLElement))break;s=s.parentNode}}else o.detached=!0;return o}function _(){var e=s(this),t=e.detached,i=e.rendered;this.__resizeRendered__!==i&&(this.__resizeRendered__=i,!t&&this.__resizeTriggerNodes__&&(c(this),this.addEventListener("scroll",this.__resizeEvents__.scroll,!0)),a(this))}function d(){var e,n,o=this;c(this),this.__timeID__&&(e=this.__timeID__,i||(i=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),i(e)),this.__timeID__=(n=function(){var e=o.__resizeSize__,t=new r(o.offsetWidth,o.offsetHeight),i=t.createResizeSize(e);(i.widthChanged||i.heightChanged)&&(o.__resizeSize__=t,a(o))},t||(t=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16.67)}).bind(window)),t(n))}function a(e){var t=e.__resizeListeners__||[];t.length&&t.forEach((function(e){e()}))}function c(e){if(e.__resizeTriggerNodes__){var t=e.__resizeTriggerNodes__,i=t.expand,r=t.expandChild,n=t.contract,o=n.scrollWidth,s=n.scrollHeight,_=i.offsetWidth,d=i.offsetHeight,a=i.scrollWidth,c=i.scrollHeight;n.scrollLeft=o,n.scrollTop=s,r.style.width=_+1+"px",r.style.height=d+1+"px",i.scrollLeft=a,i.scrollTop=c}}e.addResizeListener=function(e,t){if(e){if(e.__resizeEvents__||(e.__resizeEvents__={mutation:_.bind(e),scroll:d.bind(e),legacy:function(){a(this)}.bind(e)}),!e.__resizeListeners__)if(e.__resizeListeners__=[],window.ResizeObserver){var i=new r(e.offsetWidth,e.offsetHeight),h=new ResizeObserver((function(){!e.__resizeTriggered__&&(e.__resizeTriggered__=!0,i.equals(new r(e.offsetWidth,e.offsetHeight)))||a(e)})),l=s(e),u=l.detached,f=l.rendered;e.__resizeTriggered__=!1===u&&!1===f,e.__ro__=h,h.observe(e)}else if(e.attachEvent&&e.addEventListener)e.attachEvent("onresize",e.__resizeEvents__.legacy),document.addEventListener("DOMSubtreeModified",e.__resizeEvents__.mutation);else{o||(n=function(e){var t=document.createElement("style");return t.type="text/css",t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}('.ResizeDetector-trigger-container{visibility:hidden;opacity:0}.ResizeDetector-contract-trigger,.ResizeDetector-contract-trigger:before,.ResizeDetector-expand-trigger,.ResizeDetector-trigger-container{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.ResizeDetector-contract-trigger,.ResizeDetector-expand-trigger{background:#eee;overflow:auto}.ResizeDetector-contract-trigger:before{width:200%;height:200%}')),function(e){var t=getComputedStyle(e,null).position;t&&"static"!==t||(e.style.position="relative");e.__nativePosition__=t;var i=document.createElement("div");i.className="ResizeDetector-trigger-container";var n=document.createElement("div"),o=document.createElement("div");n.className="ResizeDetector-expand-trigger";var s=document.createElement("div");s.className="ResizeDetector-contract-trigger",n.appendChild(o),i.appendChild(n),i.appendChild(s),e.appendChild(i),e.__resizeTriggerNodes__={container:i,expand:n,expandChild:o,contract:s},c(e),e.addEventListener("scroll",e.__resizeEvents__.scroll,!0),e.__resizeSize__=new r(e.offsetWidth,e.offsetHeight)}(e),e.__resizeRendered__=s(e).rendered;var g=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(g){var v=new g(e.__resizeEvents__.mutation);v.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__mo__=v}}e.__resizeListeners__.push(t),o++}},e.removeResizeListener=function(e,t){var i,r=null==e?void 0:e.__resizeListeners__;if(r){if(t&&r.splice(r.indexOf(t),1),!r.length){if(window.ResizeObserver){if(!e.__ro__)return;e.__ro__.unobserve(e),e.__ro__.disconnect(),e.__ro__=null}else e.detachEvent&&e.removeEventListener?(e.detachEvent("onresize",e.__resizeEvents__.legacy),document.removeEventListener("DOMSubtreeModified",e.__resizeEvents__.mutation)):(e.__mo__&&(e.__mo__.disconnect(),e.__mo__=null),e.removeEventListener("scroll",e.__resizeEvents__.scroll),e.__resizeTriggerNodes__&&e.removeChild(e.__resizeTriggerNodes__.container),e.__resizeTriggerNodes__=null);e.__resizeListeners__=null}!--o&&n&&(null===(i=n.parentNode)||void 0===i||i.removeChild(n))}},Object.defineProperty(e,"__esModule",{value:!0})}));
