!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ResizeDetector={})}(this,(function(e){"use strict";var t,i,n=function(){function e(e,t){this.width=0|e,this.height=0|t,this.width<0&&(this.width=0),this.height<0&&(this.height=0)}return e.prototype.equals=function(e){return this.width===e.width&&this.height===e.height},e.prototype.createResizeSize=function(e){var t=e.width!==this.width,i=e.height!==this.height;return{width:this.width,oldWidth:e.width,widthChanged:t,height:this.height,oldHeight:e.height,heightChanged:i}},e}();var r,s=0;function o(e){var t,i,n,r=document.documentElement,s={detached:!1,rendered:!1};if(r.contains(e)){var o=e;for(s.rendered=!0;o===r||r.contains(o);){if("none"===(i="display",n=void 0,(n=(t=o).ownerDocument.defaultView)||(n=window),(n.getComputedStyle(t,null)||{display:"none"})[i])){s.rendered=!1;break}if(!(o.parentNode instanceof HTMLElement))break;o=o.parentNode}}else s.detached=!0;return s}function _(){var e=o(this),t=e.detached,i=e.rendered;this.__resizeRendered__!==i&&(this.__resizeRendered__=i,!t&&this.__resizeTriggerNodes__&&(c(this),this.__resizeEvents__&&this.addEventListener("scroll",this.__resizeEvents__.scroll,!0)),a(this))}function d(){var e,r,s=this;c(this),this.__timeID__&&(e=this.__timeID__,i||(i=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),i(e)),this.__timeID__=(r=function(){var e=s.__resizeSize__,t=new n(s.offsetWidth,s.offsetHeight),i=e?t.createResizeSize(e):{widthChanged:!1,heightChanged:!1};(i.widthChanged||i.heightChanged)&&(s.__resizeSize__=t,a(s))},t||(t=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16.67)}).bind(window)),t(r))}function a(e){var t=e.__resizeListeners__||[];t.length&&t.forEach((function(e){e()}))}function c(e){if(e.__resizeTriggerNodes__){var t=e.__resizeTriggerNodes__,i=t.expand,n=t.expandChild,r=t.contract,s=r.scrollWidth,o=r.scrollHeight,_=i.offsetWidth,d=i.offsetHeight,a=i.scrollWidth,c=i.scrollHeight;r.scrollLeft=s,r.scrollTop=o,n.style.width=_+1+"px",n.style.height=d+1+"px",i.scrollLeft=a,i.scrollTop=c}}e.addResizeListener=function(e,t){if(e){if(e.__resizeEvents__||(e.__resizeEvents__={mutation:_.bind(e),scroll:d.bind(e),legacy:function(){a(this)}.bind(e)}),!e.__resizeListeners__)if(e.__resizeListeners__=[],window.ResizeObserver){var i=new n(e.offsetWidth,e.offsetHeight),h=new ResizeObserver((function(){!e.__resizeTriggered__&&(e.__resizeTriggered__=!0,i.equals(new n(e.offsetWidth,e.offsetHeight)))||a(e)})),l=o(e),u=l.detached,g=l.rendered;e.__resizeTriggered__=!1===u&&!1===g,e.__ro__=h,h.observe(e)}else if(e.attachEvent&&e.addEventListener)e.attachEvent("onresize",e.__resizeEvents__.legacy),document.addEventListener("DOMSubtreeModified",e.__resizeEvents__.mutation);else{s||(r=function(e){var t=document.createElement("style");return t.type="text/css",t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}('.ResizeDetector-trigger-container{visibility:hidden;opacity:0}.ResizeDetector-contract-trigger,.ResizeDetector-contract-trigger:before,.ResizeDetector-expand-trigger,.ResizeDetector-trigger-container{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.ResizeDetector-contract-trigger,.ResizeDetector-expand-trigger{background:#eee;overflow:auto}.ResizeDetector-contract-trigger:before{width:200%;height:200%}')),function(e){var t=getComputedStyle(e,null).position;t&&"static"!==t||(e.style.position="relative");e.__nativePosition__=t;var i=document.createElement("div");i.className="ResizeDetector-trigger-container";var r=document.createElement("div"),s=document.createElement("div");r.className="ResizeDetector-expand-trigger";var o=document.createElement("div");o.className="ResizeDetector-contract-trigger",r.appendChild(s),i.appendChild(r),i.appendChild(o),e.appendChild(i),e.__resizeTriggerNodes__={container:i,expand:r,expandChild:s,contract:o},c(e),e.__resizeEvents__&&e.addEventListener("scroll",e.__resizeEvents__.scroll,!0),e.__resizeSize__=new n(e.offsetWidth,e.offsetHeight)}(e),e.__resizeRendered__=o(e).rendered;var f=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(f){var v=new f(e.__resizeEvents__.mutation);v.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__mo__=v}}e.__resizeListeners__.push(t),s++}},e.removeResizeListener=function(e,t){var i,n=null==e?void 0:e.__resizeListeners__;if(n){if(t&&n.splice(n.indexOf(t),1),!n.length){if(window.ResizeObserver){if(!e.__ro__)return;e.__ro__.unobserve(e),e.__ro__.disconnect(),e.__ro__=null}else e.detachEvent&&e.removeEventListener?(e.__resizeEvents__&&e.detachEvent("onresize",e.__resizeEvents__.legacy),e.__resizeEvents__&&document.removeEventListener("DOMSubtreeModified",e.__resizeEvents__.mutation)):(e.__mo__&&(e.__mo__.disconnect(),e.__mo__=null),e.__resizeEvents__&&e.removeEventListener("scroll",e.__resizeEvents__.scroll),e.__resizeTriggerNodes__&&e.removeChild(e.__resizeTriggerNodes__.container),e.__resizeTriggerNodes__=null);e.__resizeListeners__=null}!--s&&r&&(null===(i=r.parentNode)||void 0===i||i.removeChild(r))}},Object.defineProperty(e,"__esModule",{value:!0})}));
